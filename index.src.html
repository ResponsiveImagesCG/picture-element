<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      The picture element
    </title>
    <style>
.informative {
        background-color: rgb(233, 251, 233);
    }
    figure {
        display: block;
        border: thin silver solid;
        margin: 0.5em;
        padding: 0.5em;
        text-align: center;
    }
    figcaption {
        font-style: italic;
        font-size: smaller;
        text-indent: 0;
    }
    figcaption:before {
        font-weight: bold;
        counter-increment: figcaption;
        content: "Figure " counter(figcaption) ". "
    }
    ol > li {
        margin-bottom: 1em;
    }
    #conformance dd {
        margin-bottom: 1em;
    }
    pre {
        tab-size: 3; /* Reduce indentation. */
    }
    .informative-subhed {
        font-size: 120%;
    }
    a {
        color: blue
    }
    a:not([href]) {
        color: red
    }
    #open-issues-xhr {
        font-size: .9em;
    }
    #open-issues-xhr li {
        padding: .25em 0;
    }
    #open-issues-xhr .meta {
        display: block;
        font: normal .8em/1 sans-serif;
        padding: .35em 0 0 0;
    }
    #open-issues-xhr .meta b {
        font-weight: normal;
    }
    #open-issues-xhr .meta span {
        display: block;
        float: left;
        width: 5.5em;
    }
    /* --- INLINES --- */
    em.rfc2119 {
        text-transform:     lowercase;
        font-variant:       small-caps;
        font-style:         normal;
        color:              #900;
    }
    h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr, h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
        border: none;
    }
    dfn {
        font-weight:    bold;
    }
    a.internalDFN {
        color:  inherit;
        border-bottom:  1px solid #99c;
        text-decoration:    none;
    }
    a.externalDFN {
        color:  inherit;
        border-bottom:  1px dotted #ccc;
        text-decoration:    none;
    }
    a.bibref {
        text-decoration:    none;
    }
    cite .bibref {
        font-style: normal;
    }
    code {
        color:  #ff4500;
    }
    /* --- --- */
    ol.algorithm {
        counter-reset:numsection;
        list-style-type: none;
    }
    ol.algorithm li {
        margin: 0.5em 0;
    }
    ol.algorithm li:before {
        font-weight: bold;
        counter-increment: numsection;
        content: counters(numsection, ".") ") ";
    }
    /* --- TOC --- */
    .toc a, .tof a {
        text-decoration:    none;
    }
    .toc li {
        list-style-type: none;
        padding: .1em 0;
    }
    a .secno, a .figno {
        color:  #000;
    }
    ul.tof, ol.tof {
        list-style: none outside none;
    }
    .caption {
        margin-top: 0.5em;
        font-style:   italic;
    }
    /* --- TABLE --- */
    table.simple {
        border-spacing: 0;
        border-collapse:    collapse;
        border-bottom:  3px solid #005a9c;
    }
    .simple th {
        background: #005a9c;
        color:  #fff;
        padding:    3px 5px;
        text-align: left;
    }
    .simple th[scope="row"] {
        background: inherit;
        color:  inherit;
        border-top: 1px solid #ddd;
    }
    .simple td {
        padding:    3px 10px;
        border-top: 1px solid #ddd;
    }
    .simple tr:nth-child(even) {
        background: #f0f6ff;
    }
    /* --- DL --- */
    .section dd > p:first-child {
        margin-top: 0;
    }
    .section dd > p:last-child {
        margin-bottom: 0;
    }
    .section dd {
        margin-bottom:  1em;
    }
    .section dl.attrs dd, .section dl.eldef dd {
        margin-bottom:  0;
    }
    /* --- EXAMPLES --- */
    div.example-title {
        min-width: 7.5em;
        color: #b9ab2d;
    }
    div.example-title span {
        text-transform: uppercase;
    }
    aside.example, div.example, div.illegal-example {
        padding: 0.5em;
        margin: 1em 0;
        position: relative;
        clear: both;
    }
    div.illegal-example {
        color: red
    }
    div.illegal-example p {
        color: black
    }
    aside.example, div.example {
        padding: .5em;
        border-left-width: .5em;
        border-left-style: solid;
        border-color: #e0cb52;
        background: #fcfaee;
    }
    aside.example div.example {
        border-left-width: .1em;
        border-color: #999;
        background: #fff;
    }
    aside.example div.example div.example-title {
        color: #999;
    }
    /* --- ISSUES/NOTES --- */
    div.issue-title, div.note-title {
        padding-right:  1em;
        min-width: 7.5em;
        color: #b9ab2d;
    }
    div.issue-title {
        color: #e05252;
    }
    div.note-title {
        color: #52e052;
    }
    div.issue-title span, div.note-title span {
        text-transform: uppercase;
    }
    div.note, div.issue {
        margin-top: 1em;
        margin-bottom: 1em;
    }
    .note > p:first-child, .issue > p:first-child {
        margin-top: 0
    }
    .issue, .note {
        padding: .5em;
        border-left-width: .5em;
        border-left-style: solid;
    }
    div.issue, div.note {
        padding: 0.5em;
        margin: 1em 0;
        position: relative;
        clear: both;
    }
    span.note, span.issue {
        padding: .1em .5em .15em;
    }
    .issue {
        border-color: #e05252;
        background: #fbe9e9;
    }
    .note {
        border-color: #52e052;
        background: #e9fbe9;
    }
    .stability {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        margin: 0 auto 0 auto;
        width: 50%;
        background: maroon;
        color: yellow;
        -webkit-border-radius: 1em 1em 0 0;
        -moz-border-radius: 1em 1em 0 0;
        border-radius: 1em 1em 0 0;
        -moz-box-shadow: 0 0 1em #500;
        -webkit-box-shadow: 0 0 1em #500;
        box-shadow: 0 0 1em red;
        padding: 0.5em 1em;
        text-align: center;
    }
    .stability strong {
        display: block;
    }
    .stability input {
        -moz-appearance: none;
        -webkit-appearance: none;
        margin: 0;
        border: 0;
        padding: 0.25em 0.5em;
        background: transparent;
        color: black;
        position: absolute;
        top: -0.5em;
        right: 0;
        font: 1.25em sans-serif;
        text-align: center;
    }
    .stability input:hover {
        color: white;
        text-shadow: 0 0 2px black;
    }
    .stability input:active {
        padding: 0.3em 0.45em 0.2em 0.55em;
    }
    .stability :link, .stability :visited, .stability :link:hover, .stability :visited:hover {
        background: transparent;
        color: white;
    }
    </style>
    <link rel="stylesheet" href=
    "http://www.w3.org/StyleSheets/TR/W3C-[STATUS]">
    <!--[if lt IE 9]><script src='http://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]-->

    <style class="w3c ricg">
.w3c{
                border: 1px solid blue;
        }

    .ricg{
                border: 1px solid red;
    }

    span, cite{
        border: 1px dotted green;
    }
    span span{
        background-color: red;
    }
    </style>
    <link class="w3c" rel="stylesheet" href=
    "http://www.w3.org/StyleSheets/TR/W3C-[STATUS]">
    <link class="ricg" rel="stylesheet" href=
    "http://www.w3.org/StyleSheets/TR/w3c-unofficial.css">
  </head>
  <body>
    <header>
      <div class="head">
        <p>
          <a href="http://responsiveimages.org"><img style="float:right" src=
          "https://raw.github.com/ResponsiveImagesCG/meta/master/logo/Web/RICG_logo_small.png"
          alt="Responsive Images Community Group"></a> <a href=
          "http://www.w3.org/"><img height="48" width="72" alt="W3C" src=
          "http://www.w3.org/Icons/w3c_home"></a>
        </p>
        <h1>
          The picture element
        </h1>
        <h2 class="no-num no-toc">
          An HTML extension for adaptive images
        </h2>
        <h2 class="no-num no-toc w3c">
          W3C Working Draft [DATE]
        </h2>
        <h2 class="no-num no-toc ricg">
          Living document - Last updated [DATE]
        </h2>
        <dl>
          <dt>
            This Version:
          </dt>
          <dd class="ricg">
            <a href=
            "http://picture.responsiveimages.org/">http://picture.responsiveimages.org/</a>
          </dd>
          <dd class="w3c">
            <a href="[VERSION]">[VERSION]</a>
          </dd>
          <dt class="w3c">
            Latest version:
          </dt>
          <dt class="ricg">
            Latest W3C Published Version:
          </dt>
          <dd>
            <a href=
            "http://www.w3.org/TR/[SHORTNAME]/">http://www.w3.org/TR/[SHORTNAME]/</a>
          </dd>
          <dt class="w3c">
            Previous version:
          </dt>
          <dd class="w3c">
            None.
          </dd>
          <dt class="w3c">
            Latest Editor's draft:
          </dt>
          <dd>
            <a href=
            "http://picture.responsiveimages.org">http://picture.responsiveimages.org</a>
          </dd>
          <dt>
            Participate:
          </dt>
          <dd>
            <a href="http://w3c.responsiveimages.org">Join the Responsive
            Images Community Group</a>
          </dd>
          <dd>
            <a href="http://list.responsiveimages.org">Public mailing list</a>
          </dd>
          <dd>
            <a href="irc://irc.w3.org:6665/#respimg">IRC: #respimg on W3C's IRC
            server</a>
          </dd>
          <dd>
            <a href="https://twitter.com/respimg">Twitter</a>
          </dd>
          <dd>
            <a href="http://gh.responsiveimages.org">Github</a>
          </dd>
          <dt>
            Version history:
          </dt>
          <dd>
            <a href=
            "https://github.com/ResponsiveImagesCG/picture-element/commits/gh-pages">
            Github commits</a> (<a href=
            "https://github.com/ResponsiveImagesCG/picture-element/commits/gh-pages.atom">RSS</a>)
          </dd>
          <dd>
            <a href="https://twitter.com/respimg_commits">Github commits on
            Twitter</a>
          </dd>
          <dt>
            Authors:
          </dt>
          <dd>
            <span>Participants</span> of the Responsive Images Community Group
          </dd>
          <dt>
            Editors:
          </dt>
          <dd>
            <a href="http://marcosc.com">Marcos Cáceres</a>, <a href=
            "http://datadriven.com.au">Data.Driven</a>
          </dd>
          <dd>
            <a href="http://matmarquis.com/">Mat Marquis</a>
          </dd>
          <dd>
            <a href="http://blog.yoav.ws/">Yoav Weiss</a>
          </dd>
          <dd>
            Adrian Bateman, <a href="http://www.microsoft.com/">Microsoft
            Corporation</a>
          </dd>
          <dt>
            RICG Final Specification Licensing Commitments:
          </dt>
          <dd>
            <a href=
            "http://www.w3.org/community/respimg/spec/26/commitments">http://www.w3.org/community/respimg/spec/26/commitments</a>
          </dd>
        </dl>
        <p class="copyright w3c">
          <a href=
          "http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
          © [YEAR] <a href="http://www.w3.org/"><abbr title=
          "World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href=
          "http://www.csail.mit.edu/"><abbr title=
          "Massachusetts Institute of Technology">MIT</abbr></a>, <a href=
          "http://www.ercim.eu/"><abbr title=
          "European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
          <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C
          <a href=
          "http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
          <a href=
          "http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
          and <a href=
          "http://www.w3.org/Consortium/Legal/copyright-documents">document
          use</a> rules apply.
        </p>
        <p class="copyright ricg">
          Copyright © [YEAR] the Contributors to the <cite>Use Cases and
          Requirements for Standardizing Responsive Images</cite>
          Specification, published by the <a href=
          "http://www.w3.org/community/respimg/">Responsive Images Community
          Group</a> under the <a href=
          "https://www.w3.org/community/about/agreements/cla/">W3C Community
          Contributor License Agreement (CLA)</a>. A human-readable <a href=
          "http://www.w3.org/community/about/agreements/cla-deed/">summary</a>
          is available.
        </p>
      </div>
      <hr>
    </header>
    <h2 class="no-toc no-num">
      Abstract
    </h2>
    <p>
      The <code>picture</code> element provides a way to group multiple
      versions of an image based on different characteristics (e.g., format,
      resolution, cropping, etc.). This allows the user agent to select the
      optimum image to present to an end-user based on the user agent's
      environmental conditions and constraints.
    </p>
    <h2 id="status" class="no-toc no-num">
      Status of This Document
    </h2>
    <p>
      <em>This section describes the status of this document at the time of its
      publication. Other documents may supersede this document. A list of
      current W3C publications and the latest revision of this technical report
      can be found in the <a href="http://www.w3.org/TR/">W3C technical reports
      index</a> at http://www.w3.org/TR/.</em>
    </p>
    <p class="ricg">
      This specification was published by the <a href=
      "http://www.w3.org/community/respimg/">Responsive Images Community
      Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track.
      Please note that under the <a href=
      "http://www.w3.org/community/about/agreements/cla/">W3C Community
      Contributor License Agreement (CLA)</a> there is a limited opt-out and
      other conditions apply. Learn more about <a href=
      "http://www.w3.org/community/">W3C Community and Business Groups</a>.
    </p>
    <div class="note ricg">
      <div class="note-title">
        <span>Note</span>
      </div>
      <div class="">
        <p>
          This specification is under active development and changing
          frequently. Please see the list of <a href="#dfn-open-issues" class=
          "internalDFN">open issues</a>.
        </p>
      </div>
    </div>
    <div class="w3c">
      <p class="stability" id="wip">
        <strong>This is a work in progress!</strong> For the latest updates
        from the HTML WG and <a href="http://responsiveimages.org">RICG</a>,
        possibly including important bug fixes, please look at the <a href=
        "http://usecases.responsiveimages.org">editor's draft</a> instead. If
        you find any bugs, typos, or issues please <a href=
        "https://www.w3.org/Bugs/Public/enter_bug.cgi?product=HTML%20WG">file a
        bug</a>! <input onclick="closeWarning(this.parentNode)" type="button"
        value="X">
      </p><script>
function closeWarning(element) {
      element.parentNode.removeChild(element);
      var date = new Date();
      date.setDate(date.getDate()+4);
      document.cookie = 'hide-obsolescence-warning=1; expires=' + date.toGMTString();
      }
      if (getCookie('hide-obsolescence-warning') == '1')
      setTimeout(function () { document.getElementById('wip').parentNode.removeChild(document.getElementById('wip')); }, 2000);
      </script>
      <p>
        This is a First Public Working Draft.
      </p>
      <p>
        This document was published by the <a href=
        "http://www.w3.org/html/wg/">HTML Working Group</a> as a Working Draft,
        but was developed in collaboration with the <a href=
        "http://responsiveimages.org">Responsive Images Community Group</a>
        (see <a href=
        "http://www.w3.org/community/respimg/spec/26/commitments">licensing
        commitments</a>). If you are not a HTML working group member and wish
        to make comments regarding this document please send them to <a href=
        "mailto:public-html-comments@w3.org">public-html-comments@w3.org</a>
        (<a href=
        "mailto:public-html-comments-request@w3.org?subject=subscribe">subscribe</a>,
        <a href=
        "http://lists.w3.org/Archives/Public/public-html-comments/">archives</a>).
        If you are a HTML working group member and wish to make comments
        regarding this document, please send them to <a href=
        "mailto:public-html@w3.org">public-html@w3.org</a> (<a href=
        "mailto:public-html-request@w3.org?subject=subscribe">subscribe</a>,
        <a href=
        "http://lists.w3.org/Archives/Public/public-html/">archives</a>). All
        feedback is welcome.
      </p>
      <p>
        Publication as a Working Draft does not imply endorsement by the W3C
        Membership. This is a draft document and may be updated, replaced or
        obsoleted by other documents at any time. It is inappropriate to cite
        this document as other than work in progress.
      </p>
      <p>
        This document was produced by a group operating under the <a href=
        "http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004
        W3C Patent Policy</a>. W3C maintains a <a href=
        "http://www.w3.org/2004/01/pp-impl/40318/status" rel=
        "disclosure">public list of any patent disclosures</a> made in
        connection with the deliverables of the group; that page also includes
        instructions for disclosing a patent. An individual who has actual
        knowledge of a patent which the individual believes contains <a href=
        "http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
        Claim(s)</a> must disclose the information in accordance with <a href=
        "http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
        6 of the W3C Patent Policy</a>.
      </p>
    </div>
    <h2 class="no-num no-toc">
      Table of Contents
    </h2><!-- toc -->
    <h2>
      Introduction
    </h2>
    <p>
      <em>This section is non-normative.</em>
    </p>
    <p>
      This specification provides developers with a means to declare multiple
      sources for an image, and, through [<cite>CSS3-MEDIAQUERIES</cite>]
      (<cite>CSS Media Queries</cite>), it gives developers control as to when
      those images are to be presented to a user. This is achieved by
      introducing a new <code>picture</code> element to [<cite>HTML</cite>]
      that makes use of the <code>source</code> element. The
      <code>picture</code> element remains backwards compatible with legacy
      user agents by degrading gracefully through <span>fallback content</span>
      (i.e., through the <code>img</code> element) while also potentially
      providing better accessibility than the existing <code>img</code>
      element.
    </p>
    <p>
      By relying on [<cite>CSS3-MEDIAQUERIES</cite>], a user agent can
      <em>respond</em> to changes in the browsing environment by selecting the
      image source that most closely matches the browsing environment - thus
      embodying a technique known as <a href=
      "http://en.wikipedia.org/wiki/Responsive_web_design">responsive web
      design</a> directly in the HTML markup. <a href=
      "http://www.w3.org/TR/css3-mediaqueries/#media1">Media features</a> that
      a user agent can potentially respond to include, but are not limited to,
      pixel widths and heights, and pixel densities, as well as environmental
      lighting conditions, changes in orientation, and changes in media type
      such as going from screen to print.
    </p>
    <p>
      This specification also defines the <code>HTMLPictureElement</code>
      programming interface, which affords developers a set of attributes and
      methods for interacting with <code>picture</code> elements through
      ECMAScript.
    </p>
    <h3>
      Example of usage
    </h3>
    <p>
      <em>This section is non-normative.</em>
    </p>
    <p>
      This first sample shows how to combine the <code>picture</code> element
      with the source element, while also providing fallback content for legacy
      user agents through the <code>img</code> element.
    </p>
    <div class="example">
      <div class="example-title">
        <span>Example 1</span>
      </div>
      <pre class="example">
&lt;picture width="500" height="500"&gt;
   &lt;source media="(min-width: 45em)" src="large.jpg"&gt;
   &lt;source media="(min-width: 18em)" src="med.jpg"&gt;
   &lt;source src="small.jpg"&gt;
   &lt;img src="small.jpg" alt=""&gt;
   &lt;p&gt;Accessible text&lt;/p&gt;
&lt;/picture&gt;
</pre>
    </div>
    <div class="issue">
      <div class="issue-title">
        <span>Issue 1</span>
      </div>
      <div class="">
        <p>
          The following example assumes we can get <a href=
          "http://dev.w3.org/html5/srcset/">the <code>srcset</code>
          attribute</a> supported on HTML's <code>source</code> element. See
          <a href="https://github.com/Wilto/draft-prop/issues/64">issue 64</a>.
        </p>
      </div>
    </div>
    <p>
      This second example shows how the <code>picture</code> element can be
      used with <a href="http://dev.w3.org/html5/srcset/">the
      <code>srcset</code> attribute</a> to provide a range of sources suitable
      for a given media query:
    </p>
    <div class="example">
      <div class="example-title">
        <span>Example 2</span>
      </div>
      <pre class="example">
&lt;picture width="500" height="500"&gt;
   &lt;source media="(min-width: 45em)" srcset="large-1.jpg 1x, large-2.jpg 2x"&gt;
   &lt;source media="(min-width: 18em)" srcset="med-1.jpg 1x, med-2.jpg 2x"&gt;
   &lt;source srcset="small-1.jpg 1x, small-2.jpg 2x"&gt;
   &lt;img src="small-1.jpg" alt=""&gt;
   &lt;p&gt;Accessible text&lt;/p&gt;
&lt;/picture&gt;
</pre>
    </div>
    <h3>
      Relationship to <code>srcset</code>
    </h3>
    <p>
      The `srcset` attribute allows authors to define various image resources
      and “hints” that assist a user agent in determining the most appropriate
      image source to display. Given a set of image resources, the user agent
      has the option of either following or overriding the author’s
      declarations to optimize the user experience based on criteria such as
      <a href=
      "http://usecases.responsiveimages.org/#resolution-switching">display
      density</a>, connection type, <a href=
      "http://usecases.responsiveimages.org/#user-control-over-sources">user
      preferences</a>, and so on.
    </p>
    <p>
      The `picture` element defines conditions under which the UA should follow
      the author's explicit instructions when selecting which resource to
      display. This includes image sources with inherent sizes designed to
      align with layout variations specified in CSS media queries ( see:
      <a href="http://usecases.responsiveimages.org/#design-breakpoints">design
      breakpoints</a>, <a href=
      "http://usecases.responsiveimages.org/#matching-media-features-and-media-types">
      media features and types</a> and <a href=
      "http://usecases.responsiveimages.org/#relative-units">relative units</a>
      ) or <a href=
      "http://usecases.responsiveimages.org/#art-direction">content variations
      for increased clarity and focus</a> based on the client’s display size.
    </p>
    <p>
      The proposed solutions are not mutually exclusive, and may work together
      to address the complete set of <a href=
      "http://usecases.responsiveimages.org/">use cases and requirements for
      responsive images</a>.
    </p>
    <h2>
      Conformance
    </h2>
    <p>
      As well as sections marked as non-normative, all authoring guidelines,
      diagrams, examples, and notes in this specification are non-normative.
      Everything else in this specification is normative.
    </p>
    <p>
      The key words <em class="rfc2119" title="must">must</em>, <em class=
      "rfc2119" title="must not">must not</em>, <em class="rfc2119" title=
      "required">required</em>, <em class="rfc2119" title="should">should</em>,
      <em class="rfc2119" title="should not">should not</em>, <em class=
      "rfc2119" title="recommended">recommended</em>, <em class="rfc2119"
      title="may">may</em>, and <em class="rfc2119" title=
      "optional">optional</em> in this specification are to be interpreted as
      described in [<cite><a class="bibref" href=
      "#bib-RFC2119">RFC2119</a></cite>].
    </p>
    <p>
      This specification has the same <a href=
      "http://dev.w3.org/html5/spec/single-page.html#conformance-requirements">conformance
      requirements</a> and applies to the same <a href=
      "http://dev.w3.org/html5/spec/single-page.html#conformance-classes">conformance
      classes</a> as [<cite>HTML</cite>].
    </p>
    <p>
      Implementations that use ECMAScript to expose the APIs defined in this
      specification <em class="rfc2119" title="must">must</em> implement them
      in a manner consistent with the ECMAScript Bindings defined in the
      [<cite><a class="bibref" href="#bib-WEBIDL">WEBIDL</a></cite>]
      specification.
    </p>
    <h2>
      Definitions
    </h2>
    <p>
      The following terms are used throughout this specification so they are
      gathered here for the readers convenience. The following list of terms is
      not exhaustive; other terms are defined throughout this specification.
    </p>
    <p>
      The follow terms are defined by the [<cite>HTML</cite>] specification:
      <dfn id="dfn-img-element"><a href=
      "http://dev.w3.org/html5/spec/single-page.html#the-img-element"><code>img</code>
      element</a></dfn>, <dfn id="dfn-source-element"><a href=
      "http://dev.w3.org/html5/spec/single-page.html#the-source-element"><code>source</code>
      element</a></dfn>, <dfn id="dfn-fallback-content"><a href=
      "http://dev.w3.org/html5/spec/single-page.html#fallback-content">fallback
      content</a></dfn>, and <dfn id="dfn-valid-media-query"><a href=
      "http://dev.w3.org/html5/spec/single-page.html#valid-media-query">valid
      media query</a></dfn>.
    </p>
    <h2>
      The <code>picture</code> element
    </h2>
    <dl>
      <dt>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#element-dfn-categories"
        title="element-dfn-categories">Categories</a>:
      </dt>
      <dd>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#flow-content-1">Flow
        content</a>.
      </dd>
      <dd>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#phrasing-content-1">Phrasing
        content</a>.
      </dd>
      <dd>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#embedded-content-2">Embedded
        content</a>.
      </dd>
      <dd>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#palpable-content-0">Palpable
        content</a>.
      </dd>
      <dt>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#element-dfn-contexts"
        title="element-dfn-contexts">Contexts in which this element can be
        used</a>:
      </dt>
      <dd>
        Where&nbsp;<a href=
        "http://dev.w3.org/html5/spec/single-page.html#embedded-content-2">embedded
        content</a>&nbsp;is expected.
      </dd>
      <dt>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#element-dfn-content-model"
        title="element-dfn-content-model">Content model</a>:
      </dt>
      <dd>
        If zero descendents, then&nbsp;<a href=
        "http://dev.w3.org/html5/spec/single-page.html#transparent">transparent</a>.
      </dd>
      <dd>
        One&nbsp;or more <code>source</code> elements.
      </dd>
      <dd>
        Zero or one <code>img</code> element, serving as <a href=
        "#dfn-fallback-content" class="internalDFN">fallback content</a>.
      </dd>
      <dt>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#element-dfn-attributes"
        title="element-dfn-attributes">Content attributes</a>:
      </dt>
      <dd>
        <a href=
        "http://dev.w3.org/html5/spec/single-page.html#global-attributes">Global
        attributes</a>
      </dd>
      <dd>
        <code title="attr-picture-alt"><a href=
        "#attr-picture-alt">alt</a></code>
      </dd>
      <dd>
        <code title="attr-picture-src"><a href=
        "#attr-picture-src">src</a></code>
      </dd>
      <dd>
        <code title="attr-picture-srcset"><a href=
        "#attr-picture-srcset">srcset</a></code>
      </dd>
      <dd>
        <code title="attr-picture-crossorigin"><a href=
        "#attr-picture-crossorigin">crossorigin</a></code>
      </dd>
      <dd>
        <code title="attr-hyperlink-usemap"><a href=
        "#attr-hyperlink-usemap">usemap</a></code>
      </dd>
      <dd>
        <code title="attr-picture-ismap"><a href=
        "#attr-picture-ismap">ismap</a></code>
      </dd>
      <dd>
        <code>width</code>
      </dd>
      <dd>
        <code>height</code>
      </dd>
      <dt>
        <a href="http://dev.w3.org/html5/spec/single-page.html#element-dfn-dom"
        title="element-dfn-dom">DOM interface</a>:
      </dt>
      <dd>
        <pre>
[NamedConstructor=Picture,
 NamedConstructor=Picture(unsigned long width),
 NamedConstructor=Picture(unsigned long width, unsigned long height)]
HTMLPictureElement : HTMLImageElement{
   attribute DOMString <a href="#dom-picture-alt" title=
"dom-picture-alt">alt</a>;
   attribute DOMString <a href="#dom-picture-src" title=
"dom-picture-src">src</a>;
   attribute DOMString <a href="#dom-picture-crossorigin" title=
"dom-picture-crossOrigin">crossOrigin</a>;
   attribute DOMString <a href="#dom-picture-srcset" title=
"dom-picture-srcset">srcset</a>;
   readonly attribute DOMString <span title=
"dom-picture-currentsrc">currentSrc</span>;
   attribute DOMString <a href="#dom-picture-usemap" title=
"dom-picture-useMap">useMap</a>;
   attribute boolean <a href="#dom-picture-ismap" title=
"dom-picture-isMap">isMap</a>;
   readonly attribute DOMString media;
   void <span title="dom-picture-load">load</span>();
}
</pre>
      </dd>
    </dl>
    <p>
      The <code><dfn id="dfn-picture">picture</dfn></code> element used for
      displaying an image that can come from a range of sources (including the
      <dfn id="attr-picture-src" title=
      "attr-picture-src"><code>src</code></dfn> and <dfn id=
      "attr-picture-srcset" title=
      "attr-picture-srcset"><code>srcset</code></dfn> attributes). Which image
      the user agent displays depends on the <a href=
      "#dfn-algorithms-for-deriving-the-source-image" class=
      "internalDFN">algorithms for deriving the source image</a>. The value of
      the <dfn id="attr-picture-alt" title=
      "attr-picture-alt"><code>alt</code></dfn> attribute provides equivalent
      content for those who cannot process images or who have image loading
      disabled.
    </p>
    <p>
      The requirements on the <code title="attr-picture-alt"><a href=
      "#attr-picture-alt">alt</a></code> attribute's value are described
      <a href="http://www.w3.org/TR/html5/embedded-content-0.html#alt">in the
      <code>img</code> section</a>.
    </p>
    <p>
      The <code title="attr-picture-src"><a href=
      "#attr-picture-src">src</a></code> attribute may be present, and if
      present must contain a <a href=
      "http://www.w3.org/TR/html5/infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces">
      valid non-empty URL potentially surrounded by spaces</a> referencing a
      non-interactive, optionally animated, <dfn>image resource</dfn> that is
      neither paged nor scripted.
    </p>
    <p class="note">
      The requirements above imply that images can be static bitmaps (e.g.
      PNGs, GIFs, JPEGs), single-page vector documents (single-page PDFs, XML
      files with an SVG root element), animated bitmaps (APNGs, animated GIFs),
      animated vector graphics (XML files with an SVG root element that use
      declarative SMIL animation), and so forth. However, these definitions
      preclude SVG files with script, multipage PDF files, interactive MNG
      files, HTML documents, plain text documents, and so forth. <a href=
      "http://www.w3.org/TR/html5/references.html#refsPNG">[PNG]</a> <a href=
      "http://www.w3.org/TR/html5/references.html#refsGIF">[GIF]</a> <a href=
      "http://www.w3.org/TR/html5/references.html#refsJPEG">[JPEG]</a> <a href=
      "http://www.w3.org/TR/html5/references.html#refsPDF">[PDF]</a> <a href=
      "http://www.w3.org/TR/html5/references.html#refsXML">[XML]</a> <a href=
      "http://www.w3.org/TR/html5/references.html#refsAPNG">[APNG]</a> 
      <!-- <a href="#refsAGIF">[AGIF]</a> --> <a href=
      "http://www.w3.org/TR/html5/references.html#refsSVG">[SVG]</a> <a href=
      "http://www.w3.org/TR/html5/references.html#refsMNG">[MNG]</a>
    </p>
    <p>
      The <code title="attr-picture-srcset"><a href=
      "#attr-picture-srcset">srcset</a></code> attribute may be present, and if
      present must conform to <a href="http://dev.w3.org/html5/srcset/">the
      <code>srcset</code> specification</a>.
    </p>
    <dl class="domintro">
      <dt>
        <var>picture</var> . <code>currentSrc</code>
      </dt>
      <dd>
        <p>
          Returns the address of the current <span>image resource</span>.
        </p>
        <p>
          Returns the empty string when there is no <span>image
          resource</span>.
        </p>
      </dd>
    </dl>
    <div class="impl">
      <p>
        The <dfn title="dom-picture-currentSrc"><code>currentSrc</code></dfn>
        IDL attribute is initially the empty string. Its value is changed by
        the <span>resource selection algorithm</span> defined below.
      </p>
    </div>
    <p class="note">
      There are three ways to specify an <span>image resource</span>, the
      <code title="attr-picture-src">src</code> attribute, the <code title=
      "attr-picture-srcset">srcset</code> attribute, or <code>source</code>
      elements. The <code title="attr-picture-srcset">srcset</code> attribute
      overrides both the <code title="attr-picture-src">src</code> attribute
      and the elements; the <code title="attr-picture-src">src</code> attribute
      overrides the elements.
    </p>
    <p>
      The <dfn id="attr-picture-crossorigin" title=
      "attr-picture-crossorigin"><code>crossorigin</code></dfn> attribute is a
      <a href=
      "http://www.w3.org/TR/html5/infrastructure.html#cors-settings-attribute">CORS
      settings attribute</a>. Its purpose is to allow images from third-party
      sites that allow cross-origin access to be used with <code><a href=
      "http://www.w3.org/TR/html5/embedded-content-0.html#the-canvas-element">canvas</a></code>.
    </p>
    <p>
      On getting the <code>media</code> IDL attribute, the user agent
      <em class="rfc2119" title="must">must</em> return the media query that
      matches the current environment.
    </p>
    <p>
      It is <em class="rfc2119" title="recommended">recommended</em> that for
      cases where a single image source is available, and where no responsive
      adoption is needed, authors use the <code>img</code> element. Authors can
      use the srcset attribute for simple resized image sources.
    </p>
    <p>
      The <span>chosen image</span> is the embedded content.
    </p>
    <p>
      In the absence of style rules to the contrary, the chosen <span>image
      resource</span> should be rendered centered within the element's area at
      the largest possible size that fits completely within the element's area,
      with the chosen <span>image resource</span>'s intrinsic aspect ratio
      being preserved. Thus, if the aspect ratio of the <code>picture</code>
      element's area does not match the aspect ratio of the <span>image
      resource</span>, the <span>image resource</span> will be shown
      letterboxed or pillarboxed. Areas of the element's area that do not
      contain the <span>image resource</span> represent nothing.
    </p>
    <div class="note">
      <div class="note-title">
        <span>Note</span>
      </div>
      <div class="">
        <p>
          In user agents that implement CSS, the above requirement can be
          implemented by using the following style rules:
        </p>
        <pre>
picture {
   object-fit: contain;
   object-position: center;
}
</pre>
      </div>
    </div>
    <p>
      For user agents that don't support the <code>picture</code> element, an
      author can provide an <code>img</code> element as <span>fallback
      content</span>. User agents that support the <code>picture</code> element
      <em class="rfc2119" title="should not">should not</em> show this content
      to the user: it is intended for legacy user agents that do not support
      <code>picture</code>, so that a legacy <code>img</code> element can be
      shown instead.
    </p>
    <p>
      Authoring requirement: as with the <code>img</code> element, documents
      must not use the <code>picture</code>&nbsp;element as a layout tool. In
      particular,&nbsp;picture&nbsp;elements should not be used to display
      transparent images, as they rarely convey meaning and rarely add anything
      useful to the document.
    </p>
    <p>
      When used with the <code>picture</code> element, a <span>document</span>
      <em class="rfc2119" title="should">should</em> only contain
      <code>source</code> elements need to represent the same subject matter,
      but cropping and zooming can differ.
    </p>
    <div class="issue">
      <div class="issue-title">
        <span>Issue 2</span>
      </div>
      <div class="">
        <p>
          It should be codified that this is not a mechanism by which to swap
          disparate images depending on screen size. See bug <a href=
          "https://www.w3.org/Bugs/Public/show_bug.cgi?id=18384#c7">18384</a>.
        </p>
      </div>
    </div>
    <hr>
    <p>
      The <code title="attr-hyperlink-usemap"><a href=
      "#attr-hyperlink-usemap">usemap</a></code> attribute, if present, can
      indicate that the image has an associated <a href=
      "http://www.w3.org/TR/html5/embedded-content-0.html#image-map">image
      map</a>.
    </p>
    <p>
      The <dfn id="attr-picture-ismap" title=
      "attr-picture-ismap"><code>ismap</code></dfn> attribute, when used on an
      element that is a descendant of an <code><a href=
      "http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element">a</a></code>
      element with an <code title="attr-hyperlink-href"><a href=
      "http://www.w3.org/TR/html5/links.html#attr-hyperlink-href">href</a></code>
      attribute, indicates by its presence that the element provides access to
      a server-side image map. This affects how events are handled on the
      corresponding <code><a href=
      "http://www.w3.org/TR/html5/links.html#attr-hyperlink-href">a</a></code>
      element.
    </p>
    <p>
      The <code title="attr-picture-ismap"><a href=
      "#attr-picture-ismap">ismap</a></code> attribute is a <a href=
      "http://www.w3.org/TR/html5/infrastructure.html#boolean-attribute">boolean
      attribute</a>. The attribute must not be specified on an element that
      does not have an ancestor <code><a href=
      "http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element">a</a></code>
      element with an <code title="attr-hyperlink-href"><a href=
      "http://www.w3.org/TR/html5/links.html#attr-hyperlink-href">href</a></code>
      attribute.
    </p>
    <div class="impl">
      <p>
        The <dfn id="dom-picture-alt" title=
        "dom-picture-alt"><code>alt</code></dfn>, <dfn id="dom-picture-src"
        title="dom-picture-src"><code>src</code></dfn>, <dfn id=
        "dom-picture-srcset" title="dom-picture-srcset"><code>src</code></dfn>,
        IDL attributes must <a href=
        "http://www.w3.org/TR/html5/infrastructure.html#reflect">reflect</a>
        the respective content attributes of the same name.
      </p>
      <p>
        The <dfn id="dom-picture-crossorigin" title=
        "dom-picture-crossOrigin"><code>crossOrigin</code></dfn> IDL attribute
        must <a href=
        "http://www.w3.org/TR/html5/infrastructure.html#reflect">reflect</a>
        the <code title="attr-picture-crossorigin"><a href=
        "#attr-picture-crossorigin">crossorigin</a></code> content attribute.
      </p>
      <p>
        The <dfn id="dom-picture-usemap" title=
        "dom-picture-useMap"><code>useMap</code></dfn> IDL attribute must
        <a href=
        "http://www.w3.org/TR/html5/infrastructure.html#reflect">reflect</a>
        the <code title="attr-hyperlink-usemap">usemap</code> content
        attribute.
      </p>
      <p>
        The <dfn id="dom-picture-ismap" title=
        "dom-picture-isMap"><code>isMap</code></dfn> IDL attribute must
        <a href="http://www.w3.org/TR/html5/infrastructure.html#reflect">reflect</a>
        the <code title="attr-picture-ismap"><a href=
        "#attr-picture-ismap">ismap</a></code> content attribute.
      </p>
      <dl class="domintro">
        <dt>
          <var>picture</var> . <code title="dom-picture-load">load()</code>
        </dt>
        <dd>
          <p>
            Causes the element to reset and start selecting and loading a new
            <span>image resource</span> from scratch.
          </p>
        </dd>
      </dl>
    </div>
    <hr>
    <h2>
      Algorithms for deriving the source image
    </h2>
    <div class="impl">
      <div>
        <p>
          The algorithms for deriving the <dfn>source image</dfn> are as
          follows. The result is the <span title="source image">image
          source</span> to be used by the <code>picture</code> element, which
          reflects the <code>picture</code> element’s <code title=
          "attr-picture-currentsrc">currentSrc</code> IDL attribute.
        </p>
        <p>
          A <code>picture</code> is always in one of the following states:
        </p>
        <dl>
          <dt>
            <dfn title="picture-none">Unavailable</dfn>
          </dt>
          <dd>
            The user agent hasn’t obtained any image data.
          </dd>
          <dt>
            <dfn title="picture-inc">Partially available</dfn>
          </dt>
          <dd>
            The user agent has obtained some of the image data.
          </dd>
          <dt>
            <dfn title="picture-all">Completely available</dfn>
          </dt>
          <dd>
            The user agent has obtained all of the image data and at least the
            image dimensions are available.
          </dd>
          <dt title="picture-error">
            <dfn>Broken</dfn>
          </dt>
          <dd>
            The user agent has obtained all of the image data that it can, but
            it cannot even decode the image enough to get the image dimensions
            (e.g. the image is corrupted, or the format is not supported, or no
            data could be obtained).
          </dd>
        </dl>
        <p>
          When a <code>picture</code> element is either in the <span title=
          "picture-inc">partially available</span> state or in the <span title=
          "picture-all">completely available</span> state, it is said to be
          <dfn title="picture-available">available</dfn>.
        </p>
        <p>
          A <code>picture</code> element is initially <span title=
          "picture-none">unavailable</span>.
        </p>
        <p>
          When a <code>picture</code> element is <span title=
          "picture-available">available</span>, it provides a <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#provides-a-paint-source">
          paint source</a> whose width is the image’s intrinsic width, whose
          height is the image’s intrinsic height, and whose appearance is the
          intrinsic appearance of the image.
        </p>
        <p>
          Each <code>picture</code> element has a <dfn>last selected
          source</dfn>, which must initially be null, and a <dfn>current pixel
          density</dfn>, which must initially be undefined.
        </p>
        <p>
          When a <code>picture</code> element has a <span>current pixel
          density</span> that is not 1.0, the element’s image data must be
          treated as if its resolution, in device pixels per CSS pixels, was
          the <span>current pixel density</span>.
        </p>
        <p class="example">
          For example, if the <span>current pixel density</span> is 3.125, that
          means that there are 300 device pixels per CSS inch, and thus if the
          image data is 300x600, it has an intrinsic dimension of 96 CSS pixels
          by 192 CSS pixels.
        </p>
        <p>
          Each <code><a href=
          "http://www.w3.org/TR/html51/dom.html#document">Document</a></code>
          object must have a <dfn>list of available images</dfn>. Each image in
          this list is identified by a tuple consisting of an <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#absolute-url">absolute
          URL</a>, a <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#cors-settings-attribute">
          CORS settings attribute</a> mode, and, if the mode is not <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#attr-crossorigin-none">
          No CORS</a>, an <a href=
          "http://www.w3.org/TR/html51/browsers.html#origin-0">origin</a>. User
          agents may copy entries from one <code><a href=
          "http://www.w3.org/TR/html51/dom.html#document">Document</a></code>
          object’s list of available images to another at any time (e.g. when
          the <code><a href=
          "http://www.w3.org/TR/html51/dom.html#document">Document</a></code>
          is created, user agents can add to it all the images that are loaded
          in other <code><a href=
          "http://www.w3.org/TR/html51/dom.html#document">Document</a></code>s),
          but must not change the keys of entries copied in this way when doing
          so. User agents may also remove images from such lists at any time
          (e.g. to save memory).
        </p>
        <p>
          Each <code>picture</code> element has a <dfn>delaying-the-load-event
          flag</dfn>, which must begin in the false state. While the
          <span>delaying-the-load-event flag</span> is true, the element must
          delay the load event of its document.
        </p>
        <hr>
        <p>
          Images are obtained and updated by running the <span>picture load
          algorithm</span>.
        </p>
        <p>
          In a <a href=
          "http://www.w3.org/TR/html51/browsers.html#browsing-context">browsing
          context</a> where <a href=
          "http://www.w3.org/TR/html51/webappapis.html#concept-bc-noscript">scripting
          is disabled</a>, user agents may obtain images immediately or on
          demand. In a <a href=
          "http://www.w3.org/TR/html51/browsers.html#browsing-context">browsing
          context</a> where <a href=
          "http://www.w3.org/TR/html51/webappapis.html#concept-bc-noscript">scripting
          is enabled</a>, user agents must obtain images immediately.
        </p>
        <p>
          A user agent that obtains images immediately must synchronously
          <span title="picture-load-algorithm">update the image data</span> of
          a <code>picture</code> element whenever that element is created with
          a <code title="attr-picture-src">src</code> or <code title=
          "attr-picture-srcset">srcset</code> attribute. A user agent that
          obtains images immediately must also synchronously <span title=
          "picture-load-algorithm">update the image data</span> of a
          <code>picture</code> element whenever that element has its
          <code>src</code>, <code>srcset</code>, <code title=
          "attr-picture-crossorigin">crossorigin</code> attribute set, changed,
          or removed.
        </p><!-- Note how this does NOT happen when the base URL changes. -->
        <p>
          A user agent that obtains images on demand must <span title=
          "picture-load-algorithm">update the image data</span> of a
          <code>picture</code> element whenever it needs the image data (i.e.
          on demand), but only if the <code>picture</code> element has a
          <code title="attr-picture-src">src</code> or <code title=
          "attr-picture-srcset">srcset</code> attribute, and only if the
          <code>picture</code> element is in the <span title=
          "picture-none">unavailable</span> state. When a <code>picture</code>
          element’s <code title="attr-picture-src">src</code>, <code title=
          "attr-picture-srcset">srcset</code>, or <code title=
          "attr-picture-crossorigin">crossorigin</code> attribute is set,
          changed, or removed, if the user agent only obtains images on demand,
          the <code>picture</code> element must return to the <span title=
          "picture-none">unavailable</span> state.
        </p><!-- Note how this does NOT happen when the base URL changes. -->
        <p>
          When the <dfn title="dom-picture-load"><code>load()</code></dfn>
          method on a <code>picture</code> element is invoked, the user agent
          must run the <span>picture load algorithm</span>.
        </p>
        <p>
          A user agent may override requests for higher-resolution images based
          on user preferences. For example: “always request high-resolution
          images,” “always request low-resolution images,” and “request
          high-resolution images as bandwidth permits” based on the bandwidth
          information available to the browser.
        </p>
      </div>
      <hr>
      <h3>
        Picture load algorithm
      </h3>
      <div>
        <p>
          The <dfn>picture load algorithm</dfn> must be run when the user agent
          is to obtain the image data of a <code>picture</code> element. The
          user agent may at any time run the following algorithm to update a
          <code>picture</code> element’s image in order to react to changes in
          the environment. The picture load algorithm consists of the following
          steps:
        </p>
        <ol>
          <li>
            <p>
              Return the <code>picture</code> element to the <span title=
              "picture-none">unavailable</span> state.
            </p>
          </li>
          <li>
            <p>
              If an instance of the <span>resource fetching algorithm</span> is
              still running for this element, then abort that algorithm,
              discarding any pending <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">tasks</a>
              generated by that algorithm.
            </p>
            <p>
              If an instance of the <span>resource selection algorithm</span>
              is still running for this element, then abort that algorithm,
              discarding any pending <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">tasks</a>
              generated by that algorithm.
            </p>
            <p>
              If an instance of the <span>source selection algorithm</span> is
              still running for this element, then abort that algorithm,
              discarding any pending <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">tasks</a>
              generated by that algorithm.
            </p>
            <p class="note">
              Basically, pending events and callbacks for the
              <code>picture</code> element are discarded when the
              <code>picture</code> element starts loading a new resource.
            </p>
          </li>
          <li>
            <p>
              Forget the <code>picture</code> element’s current image data, if
              any.
            </p>
          </li>
          <li>
            <p>
              <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">Queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code>emptied</code> at the
              <code>picture</code> element.
            </p>
          </li>
          <li>
            <p>
              If the user agent cannot support images, or its support for
              images has been disabled, then abort these steps.
            </p>
          </li>
          <li>
            <p>
              Invoke the <code>picture</code> element’s <span>source selection
              algorithm</span>.
            </p>
          </li>
        </ol>
        <div class="note">
          <p>
            <em>This note is non-normative.</em>
          </p>
          <p>
            What we want to do is have the <code>picture</code> behave exactly
            the same as an <code>img</code> element, but with the only
            difference being that it is <code>source</code> elements are used
            to determine the value of the <code title=
            "attr-picture-src">src</code> or <code title=
            "attr-picture-srcset">srcset</code> IDL attributes (and hence what
            image content is displayed). How that is determined is through
            using the <code title="attr-source-media">media</code> and
            <code title="attr-source-type">type</code> attributes of the
            <code>source</code> element.
          </p>
          <p>
            So, to derive the source image: ignoring any sources whose
            <code title="attr-source-type">type</code> is not supported by the
            browser, gather all the media queries from the <code>source</code>
            elements’ <code title="attr-source-media">media</code> attributes
            into a “stylesheet”, in document order. Any missing <code title=
            "attr-source-media">media</code> attributes are just assumed to
            mean “all”. Any media attributes that are not valid media queries
            are ignored.
          </p>
          <p>
            The API then just works the same as per images. Events are fired in
            the same way as if the image’s src IDL attribute had been set
            manually by the author.
          </p>
          <p>
            The resource fetching behavior of then governed by <cite>CSS Image
            Values and Replaced Content Module Level 4</cite>.
          </p>
        </div>
      </div>
      <hr>
      <h3>
        Source selection algorithm
      </h3>
      <div>
        <p>
          The <dfn>source selection algorithm</dfn> for a <code>picture</code>
          element is as follows. This algorithm is always invoked
          synchronously, but one of the first steps in the algorithm is to
          return and continue running the remaining steps asynchronously,
          meaning that it runs in the background with scripts and other
          <a href="http://www.w3.org/TR/html51/webappapis.html#concept-task">tasks</a>
          running in parallel. In addition, this algorithm interacts closely
          with the <a href=
          "http://www.w3.org/TR/html51/webappapis.html#event-loop">event
          loop</a> mechanism; in particular, it has <a href=
          "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">synchronous
          sections</a> (which are triggered as part of the <a href=
          "http://www.w3.org/TR/html51/webappapis.html#event-loop">event
          loop</a> algorithm). Steps in such sections are marked with †.
        </p>
        <ol>
          <li>
            <p>
              Set the <code>picture</code> element’s
              <span>delaying-the-load-event flag</span> to true (this <a href=
              "http://www.w3.org/TR/html51/syntax.html#delay-the-load-event">delays
              the load event</a>).
            </p>
          </li>
          <li>
            <p>
              Asynchronously <a href=
              "http://www.w3.org/TR/html51/webappapis.html#await-a-stable-state">
              await a stable state</a>, allowing the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              that invoked this algorithm to continue. The <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous section</a> consists of all the remaining steps of
              this algorithm until the algorithm says the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous section</a> has ended. (Steps in <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous sections</a> are marked with †.)
            </p>
          </li>
          <li>
            <p>
              † If the <code>picture</code> element has a <code title=
              "attr-picture-src">src</code> or <code title=
              "attr-picture-srcset">srcset</code> attribute, then let
              <var>mode</var> be <i>attribute</i>.
            </p>
            <p>
              † Otherwise, if the <code>picture</code> element does not have a
              <code title="attr-picture-src">src</code> or <code title=
              "attr-picture-srcset">srcset</code>attribute but has a
              <code>source</code> element child, then let <var>mode</var> be
              <i>source</i> and let <var>candidate</var> be the first such
              <code>source</code> element child in <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#tree-order">tree
              order</a>.
            </p>
            <p>
              † Otherwise the picture element has neither <code title=
              "attr-picture-src">src</code> nor <code title=
              "attr-picture-srcset">srcset</code> attributes nor a
              <code>source</code> element child: set the element to the
              <span title="picture-error">broken</span> state, <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple</a> event named <code title=
              "event-error">error</code> at the <code>picture</code> element,
              set the element’s <span>delaying-the-load-event flag</span> to
              false, and abort these steps. The <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous section</a> ends.
            </p>
          </li>
          <li>
            <p>
              † <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">Queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-loadstart">loadstart</code> at the <code>picture</code>
              element.
            </p>
          </li>
          <li>
            <p>
              If <var>mode</var> is <i>attribute</i>, then run these substeps:
            </p>
            <ol>
              <li>
                <p>
                  If the element has a <code title=
                  "attr-picture-srcset">srcset</code> attribute specified and
                  its value is not the empty string, then let the
                  <code>picture</code> element be the input to the
                  <span>resource selection algorithm</span>, and let the
                  <var>selected source</var> and <var>selected pixel
                  density</var> be the URL and pixel density that results from
                  the that algorithm, respectively.
                </p>
                <p>
                  Otherwise, if the element has a <code title=
                  "attr-picture-src">src</code> attribute specified and its
                  value is not the empty string, let <var>selected source</var>
                  be the value of the element’s <code title=
                  "attr-picture-src">src</code> attribute, and <var>selected
                  pixel density</var> be 1.0.
                </p>
                <p>
                  Otherwise, let <var>selected source</var> be null and
                  <var>selected pixel density</var> be undefined.
                </p>
              </li>
            </ol>
            <p>
              Otherwise, the <code>source</code> elements will be used; run
              these substeps:
            </p>
            <ol>
              <li>
                <p>
                  Let <var>pointer</var> be a position defined by two adjacent
                  nodes in the <code>picture</code> element’s child list,
                  treating the start of the list (before the first child in the
                  list, if any) and end of the list (after the last child in
                  the list, if any) as nodes in their own right. One node is
                  the node before <var>pointer</var>, and the other node is the
                  node after <var>pointer</var>. Initially, let
                  <var>pointer</var> be the position between the
                  <var>candidate</var> node and the next node, if there are
                  any, or the end of the list, if it is the last node.
                </p>
                <p>
                  As nodes are inserted and removed into the
                  <code>picture</code> element, <var>pointer</var> must be
                  updated as follows:
                </p>
                <dl>
                  <dt>
                    If a new node is inserted between the two nodes that define
                    <var>pointer</var>
                  </dt>
                  <dd>
                    Let <var>pointer</var> be the point between the node before
                    <var>pointer</var> and the new node. In other words,
                    insertions at <var>pointer</var> go after
                    <var>pointer</var>.
                  </dd>
                  <dt>
                    If the node before <var>pointer</var> is removed
                  </dt>
                  <dd>
                    Let <var>pointer</var> be the point between the node after
                    <var>pointer</var> and the node before the node after
                    <var>pointer</var>. In other words, <var>pointer</var>
                    doesn’t move relative to the remaining nodes.
                  </dd>
                  <dt>
                    If the node after <var>pointer</var> is removed
                  </dt>
                  <dd>
                    Let <var>pointer</var> be the point between the node before
                    <var>pointer</var> and the node after the node before
                    <var>pointer</var>. Just as with the previous case,
                    <var>pointer</var> doesn’t move relative to the remaining
                    nodes.
                  </dd>
                </dl>
                <p>
                  Other changes don’t affect <var>pointer</var>.
                </p>
              </li>
              <li>
                <p>
                  <i>process candidate</i>: If <var>candidate</var> has neither
                  a <code title="attr-source-src">src</code> attribute nor a
                  <code title="attr-source-srcset">srcset</code> attribute, or
                  if it has only a <code title="attr-source-src">src</code>
                  attribute or a <code title="attr-source-srcset">srcset</code>
                  attribute and this attribute’s value is the empty string, or
                  if it has both a <code title="attr-source-src">src</code> and
                  a <code title="attr-source-srcset">srcset</code> attribute
                  and the value of both is the the empty string, then end the
                  <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a>, and jump down to the <i>failed</i>
                  step below.
                </p>
              </li>
              <li>
                <p>
                  If <var>candidate</var> has a <code title=
                  "attr-source-type">type</code> attribute whose value, when
                  parsed as a <a href=
                  "http://www.w3.org/TR/html51/infrastructure.html#mime-type">MIME
                  type</a> (including any codecs described by the
                  <code>codecs</code> parameter, for types that define that
                  parameter), represents <a href=
                  "http://www.w3.org/TR/html51/embedded-content-0.html#a-type-that-the-user-agent-knows-it-cannot-render">
                  a type that the user agent knows it cannot render</a>, then
                  end the <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a>, and jump down to the <i>failed</i>
                  step below.
                </p>
              </li>
              <li>
                <p>
                  If <var>candidate</var> has a <code title=
                  "attr-source-media">media</code> attribute whose value does
                  not <a href=
                  "http://www.w3.org/TR/html51/infrastructure.html#matches-the-environment">
                  match the environment</a>, then end the <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a>, and jump down to the <i>failed</i>
                  step below.
                </p>
              </li>
              <li>
                <p>
                  If the element has a <code title=
                  "attr-source-srcset">srcset</code> attribute specified and
                  its value is not the empty string, then let the
                  <code>source</code> element be the input to the
                  <span>resource selection algorithm</span>, and let the
                  <var>selected source</var> and <var>selected pixel
                  density</var> be the URL and pixel density that results from
                  the that algorithm, respectively.
                </p>
                <p>
                  Otherwise, if the element has a <code title=
                  "attr-source-src">src</code> attribute specified and its
                  value is not the empty string, let <var>selected source</var>
                  be the value of the element’s <code title=
                  "attr-source-src">src</code> attribute, and <var>selected
                  pixel density</var> be 1.0. Otherwise, let <var>selected
                  source</var> be null and <var>selected pixel density</var> be
                  undefined.
                </p>
              </li>
              <li>
                <p>
                  <i>failed</i>: <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">Queue
                  a task</a>, using the <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#dom-manipulation-task-source">
                  DOM manipulation task source</a>, to <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
                  fire a simple event</a> named <code>error</code> at the
                  <var>candidate</var> element, in the context of the <a href=
                  "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetching
                  process</a> that was used to try to obtain
                  <var>candidate</var>’s corresponding <span>image
                  resource</span> in the <span>resource fetching
                  algorithm</span>.
                </p>
              </li>
              <li>
                <p>
                  Asynchronously <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#await-a-stable-state">
                  await a stable state</a>. The <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a> consists of all the remaining steps
                  of this algorithm until the algorithm says the synchronous
                  section has ended. (Steps in <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous sections</a> are marked with †.)
                </p>
              </li>
              <li>
                <p>
                  Find next candidate: Let <var>candidate</var> be null.
                </p>
              </li>
              <li>
                <p>
                  <i>Search loop</i>: If the node after <var>pointer</var> is
                  the end of the list, then jump to the <i>waiting</i> step
                  below.
                </p>
              </li>
              <li>
                <p>
                  If the node after <var>pointer</var> is a <code>source</code>
                  element, let <var>candidate</var> be that element.
                </p>
              </li>
              <li>
                <p>
                  Advance <var>pointer</var> so that the node before
                  <var>pointer</var> is now the node that was after
                  <var>pointer</var>, and the node after <var>pointer</var> is
                  the node after the node that used to be after
                  <var>pointer</var>, if any.
                </p>
              </li>
              <li>
                <p>
                  If <var>candidate</var> is null, jump back to the <i>search
                  loop</i> step. Otherwise, jump back to the <i>process
                  candidate</i> step.
                </p>
              </li>
              <li>
                <p>
                  <i>Waiting</i>: Set the element’s
                  <span>delaying-the-load-event flag to false</span>. This
                  stops <a href=
                  "http://www.w3.org/TR/html51/syntax.html#delay-the-load-event">
                  delaying the load event</a>.
                </p>
              </li>
              <li>
                <p>
                  End the <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a>, continuing the remaining steps
                  asynchronously.
                </p>
              </li>
              <li>
                <p>
                  Wait until the node after <var>pointer</var> is a node other
                  than the end of the list. (This step might wait forever.)
                </p>
              </li>
              <li>
                <p>
                  Asynchronously <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#await-a-stable-state">
                  await a stable state</a>. The <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a> consists of all the remaining steps
                  of this algorithm until the algorithm says the <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous section</a> has ended. (Steps in <a href=
                  "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
                  synchronous sections</a> are marked with †.)
                </p>
              </li>
              <li>
                <p>
                  † Set the element’s <span>delaying-the-load-event flag</span>
                  back to true (this <a href=
                  "http://www.w3.org/TR/html51/syntax.html#delay-the-load-event">
                  delays the load event</a> again, in case it hasn’t been fired
                  yet).
                </p>
              </li>
              <li>
                <p>
                  † Jump back to the <i>Find next candidate</i> step above.
                </p>
              </li>
            </ol>
          </li>
          <li>
            <p>
              Let the <code>picture</code> element’s <span>last selected
              source</span> be <var>selected source</var> and the
              <code>picture</code> element’s <span>current pixel density</span>
              be <var>selected pixel density</var>.
            </p>
          </li>
          <li>
            <p>
              <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#resolve-a-url">Resolve</a>
              <var>selected source</var>, relative to the element. If that is
              not successful, set the <code>picture</code> element to the
              <span title="picture-error">broken state</span>, <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-error">error</code> at the <code>picture</code> element,
              set the element’s <span>delaying-the-load-event flag to
              false</span>, and abort these steps.
            </p>
          </li>
          <li>
            <p>
              Let <var>absolute URL</var> be the resulting <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#absolute-url">absolute
              URL</a>.
            </p>
          </li>
          <li>
            <p>
              Set the <code>picture</code> element’s <code title=
              "attr-picture-currentsrc">currentSrc</code> IDL attribute to
              <var>absolute URL</var>.
            </p>
          </li>
          <li>
            <p>
              Let <var>key</var> be a tuple consisting of <var>absolute
              URL</var>, the <code>picture</code> element’s <code title=
              "attr-picture-crossorigin">crossorigin</code> attribute’s mode,
              and, if that mode is not <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#attr-crossorigin-none">
              No CORS</a>, the <code>Document</code> object’s <a href=
              "http://www.w3.org/TR/html51/browsers.html#origin-0">origin</a>.
            </p>
          </li>
          <li>
            <p>
              If the <a href=
              "http://www.w3.org/TR/html51/embedded-content-0.html#list-of-available-images">
              list of available images</a>, contains an entry for
              <var>key</var>, then set the <code>picture</code> element to the
              <span title="picture-all">completely available</span> state,
              update the presentation of the image appropriately, <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-load">load</code> at the <code>picture</code> element, and
              abort these steps.
            </p>
          </li>
          <li>
            <p>
              Asynchronously <a href=
              "http://www.w3.org/TR/html51/webappapis.html#await-a-stable-state">
              await a stable state</a>, allowing the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              that invoked this algorithm to continue. The <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous section</a> consists of all the remaining steps of
              this algorithm until the algorithm says the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous section</a> has ended. (Steps in <a href=
              "http://www.w3.org/TR/html51/webappapis.html#synchronous-section">
              synchronous sections</a> are marked with †.)
            </p>
          </li>
          <li>
            <p>
              † If another instance of this algorithm for this
              <code>picture</code> element was started after this instance
              (even if it aborted and is no longer running), then abort these
              steps.
            </p>
            <p class="note">
              Only the last instance takes effect, to avoid multiple requests
              when, for example, the <code title="attr-picture-src">src</code>,
              <code title="attr-picture-srcset">srcset</code>, and <code title=
              "attr-picture-crossorigin">crossorigin</code> attributes are all
              set in succession.
            </p>
          </li>
          <li>
            <p>
              † If <var>selected source</var> is null, then set the element to
              the <span title="picture-broken">broken state</span>, <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-error">error</code> at the <code>picture</code> element,
              set the element’s <span>delaying-the-load-event flag to
              false</span>, and abort these steps.
            </p>
          </li>
          <li>
            <p>
              Run the <span>resource fetching algorithm</span> with
              <var>absolute URL</var>.
            </p>
            <p>
              If that algorithm returns without aborting <em>this</em> one,
              then the load failed. Set the <code>picture</code> element to the
              <span title="picture-error">broken state</span>, <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-error">error</code> at the <code>picture</code> element,
              set the element’s <span>delaying-the-load-event flag to
              false</span>, and abort these steps.
            </p>
          </li>
        </ol>
      </div>
      <hr>
      <h3>
        Resource selection algorithm
      </h3>
      <div>
        <p>
          When the user agent is required to <dfn title=
          "resource selection algorithm">select an image resource</dfn> for a
          <code>picture</code> or <code>source</code> element’s <code title=
          "attr-picture-src">src</code> or <code title=
          "attr-picture-srcset">srcset</code> attribute, the user agent must
          run the following algorithm:
        </p>
        <ol>
          <li>Let <var>input</var> be the element that was input to this
          algorithm
          </li>
          <li>Let <var>output</var> be the results of running the <a href=
          "http://www.w3.org/html/wg/drafts/srcset/w3c-srcset/processing-the-image-candidates">
            process the image candidates algorithm from the srcset
            specification</a>, with <var>input</var> replacing any instance of
            <code>img</code> in that algorithm.
            <div class="note">
              <p>
                In that algorithm:
              </p>
              <ul>
                <li>ignore image candidate string components #4–6
                </li>
                <li>ignore the first two cases in <i>Processing the image
                candidates</i> step 6
                </li>
              </ul>
            </div>
          </li>
          <li>Return <var>output</var> to the task that launched this algorithm
          </li>
        </ol>
      </div>
      <hr>
      <h3>
        Resource fetching algorithm
      </h3>
      <div>
        <p>
          The <dfn>resource fetching algorithm</dfn> for a <code>picture</code>
          element and a given <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#absolute-url">absolute
          URL</a> is as follows:
        </p>
        <ol>
          <li>
            <p>
              Do a <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#potentially-cors-enabled-fetch">
              potentially CORS-enabled fetch</a> of the given <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#absolute-url">absolute
              URL</a>, with the <i>mode</i> being the state of the element’s
              <code title="attr-picture-crossorigin">crossorigin</code> content
              attribute, the <i>origin</i> being the <a href=
              "http://www.w3.org/TR/html51/browsers.html#origin-0">origin</a>
              of the <code>picture</code> element’s <code>Document</code>, and
              the <i>default origin behaviour</i> set to <i>taint</i>.
            </p>
            <p>
              The resource obtained in this fashion, if any, is the
              <code>picture</code> element’s image data. It can be either
              <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#cors-same-origin">
              CORS-same-origin</a> or <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#cors-cross-origin">
              CORS-cross-origin</a>; this affects the <a href=
              "http://www.w3.org/TR/html51/browsers.html#origin-0">origin</a>
              of the image itself (e.g. when used on a <code>canvas</code>).
            </p>
            <p>
              Fetching the image must <a href=
              "http://www.w3.org/TR/html51/syntax.html#delay-the-load-event">delay
              the load event</a> of the element’s document until the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              that is <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queued</a>
              by the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#networking-task-source">
              networking task source</a> once the resource has been <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetched</a>
              (defined below) has been run.
            </p>
            <p class="warning">
              This, unfortunately, can be used to perform a rudimentary port
              scan of the user’s local network (especially in conjunction with
              scripting, though scripting isn’t actually necessary to carry out
              such an attack). User agents may implement <a href=
              "http://www.w3.org/TR/html51/browsers.html#origin-0">cross-origin</a>
              access control policies that are stricter than those described
              above to mitigate this attack, but unfortunately such policies
              are typically not compatible with existing Web content.
            </p>
            <p>
              Every 350ms (±200ms) or for every byte received, whichever is
              <em>least</em> frequent, <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-progress">progress</code> at the element.
            </p>
            <p>
              The <dfn>stall timeout</dfn> is a user-agent defined length of
              time, which should be about three seconds. When a
              <code>picture</code> element that is actively attempting to
              obtain <span>image data</span> has failed to receive any data for
              a duration equal to the <span>stall timeout</span>, the user
              agent must <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-stalled">stalled</code> at the element.
            </p>
            <p>
              User agents may allow users to selectively block or slow
              <span>image data</span> downloads. When a <code>picture</code>
              element’s download has been blocked altogether, the user agent
              must act as if it was stalled (as opposed to acting as if the
              connection was closed). The rate of the download may also be
              throttled automatically by the user agent, e.g. to balance the
              download with other connections sharing the same bandwidth.
            </p>
            <p>
              User agents may decide to not download more content at any time.
              When a <code>picture</code> element’s download has been
              suspended, the user agent must <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-suspend">suspend</code> at the element.
            </p>
            <p>
              When a user agent decides to completely stall a download, the
              element’s <span>delaying-the-load-event flag</span> must be set
              to false. This stops <a href=
              "http://www.w3.org/TR/html51/syntax.html#delay-the-load-event">delaying
              the load event</a>.
            </p>
            <p>
              The user agent may use whatever means necessary to fetch the
              resource (within the constraints put forward by this and other
              specifications); for example, reconnecting to the server in the
              face of network errors, using HTTP range retrieval requests, or
              switching to a streaming protocol. The user agent must consider a
              resource erroneous only if it has given up trying to fetch it.
            </p>
            <p>
              The first <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              that is <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queued</a>
              by the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#networking-task-source">
              networking task source</a> while the image is being <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetched</a>
              must set the <code>picture</code> element’s state to <span title=
              "picture-inc">partially available</span>.
            </p>
            <p>
              If the resource is in a supported image format, then each
              <a href="http://www.w3.org/TR/html51/webappapis.html#concept-task">
              task</a> that is <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queued</a>
              by the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#networking-task-source">
              networking task source</a> while the image is being <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetched</a>
              must update the presentation of the image appropriately (e.g. if
              the image is a progressive JPEG, each packet can improve the
              resolution of the image). In addition, if the resource is
              <a href="http://www.w3.org/TR/html51/infrastructure.html#cors-same-origin">
              CORS-same-origin</a>, each such <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              must <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fire-a-progress-event">
              fire a progress event</a> named <code title=
              "event-progress">progress</code> at the <code>picture</code>
              element.
            </p>
            <p>
              Furthermore, the last <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              that is <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queued</a>
              by the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#networking-task-source">
              networking task source</a> once the resource has been <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetched</a>
              must additionally run the steps for the matching entry in the
              following list:
            </p>
            <dl class="switch">
              <dt>
                If the download was successful and the user agent was able to
                determine the image’s width and height
              </dt>
              <dd>
                <ol>
                  <li>
                    <p>
                      Set the <code>picture</code> element to the <span title=
                      "picture-all">completely available</span> state.
                    </p>
                  </li>
                  <li>
                    <p>
                      Add the image to the <span>list of available
                      images</span> using the key <var>key</var>.
                    </p>
                  </li>
                  <li>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-same-origin">
                      CORS-same-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#fire-a-progress-event">
                      fire a progress event</a> named <code title=
                      "event-load">load</code> at the <code>picture</code>
                      element.
                    </p>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-cross-origin">
                      CORS-cross-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
                      fire a simple event</a> named <code title=
                      "event-load">load</code> at the <code>picture</code>
                      element.
                    </p>
                  </li>
                  <li>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-same-origin">
                      CORS-same-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#fire-a-progress-event">
                      fire a progress event</a> named <code title=
                      "event-loadend">loadend</code> at the
                      <code>picture</code> element.
                    </p>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-cross-origin">
                      CORS-cross-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
                      fire a simple event named</a> <code title=
                      "event-loadend">loadend</code> at the
                      <code>picture</code> element.
                    </p>
                  </li>
                </ol>
              </dd>
              <dt>
                Otherwise
              </dt>
              <dd>
                <ol>
                  <li>
                    <p>
                      Set the <code>picture</code> element to the <span title=
                      "picture-error">broken</span> state.
                    </p>
                  </li>
                  <li>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-same-origin">
                      CORS-same-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#fire-a-progress-event">
                      fire a progress event</a> named <code title=
                      "event-load">load</code> at the <code>picture</code>
                      element.
                    </p>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-cross-origin">
                      CORS-cross-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
                      fire a simple event</a> named <code title=
                      "event-load">load</code> at the <code>picture</code>
                      element.
                    </p>
                  </li>
                  <li>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-same-origin">
                      CORS-same-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#fire-a-progress-event">
                      fire a progress event</a> named <code title=
                      "event-loadend">loadend</code> at the
                      <code>picture</code> element.
                    </p>
                    <p>
                      If the resource is <a href=
                      "http://www.w3.org/TR/html51/infrastructure.html#cors-cross-origin">
                      CORS-cross-origin</a>: <a href=
                      "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
                      fire a simple event</a> named <code title=
                      "event-loadend">loadend</code> at the
                      <code>picture</code> element.
                    </p>
                  </li>
                </ol>
              </dd>
            </dl>
            <p>
              On the other hand, if the resource type is <code><a href=
              "http://www.w3.org/TR/html51/iana.html#multipart/x-mixed-replace">
              multipart/x-mixed-replace</a></code>, then each <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">task</a>
              that is <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queued</a>
              by the <a href=
              "http://www.w3.org/TR/html51/webappapis.html#networking-task-source">
              networking task source</a> while the image is being <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetched</a>
              must also update the presentation of the image, but as each new
              body part comes in, it must replace the previous image. Once one
              body part has been completely decoded, the user agent must set
              the <code>picture</code> element to the <span title=
              "picture-all">completely available</span> state and <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-load">load</code> at the <code>picture</code> element.
            </p>
            <p class="note">
              The <code title="event-progress">progress</code> and <code title=
              "event-loadend">loadend</code> events are not fired for
              <code><a href=
              "http://www.w3.org/TR/html51/iana.html#multipart/x-mixed-replace">
              multipart/x-mixed-replace</a></code> image streams.
            </p>
            <p>
              Otherwise, either the image data is corrupted in some fatal way
              such that the image dimensions cannot be obtained, or the image
              data is not in a supported file format; the user agent must set
              the <code>picture</code> element to the <span title=
              "picture-error">broken state</span>, abort the <a href=
              "http://www.w3.org/TR/html51/infrastructure.html#fetch">fetching</a>
              algorithm, discarding any pending <a href=
              "http://www.w3.org/TR/html51/webappapis.html#concept-task">tasks</a>
              generated by that algorithm, and then <a href=
              "http://www.w3.org/TR/html51/webappapis.html#queue-a-task">queue
              a task</a> to first <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-error">error</code> at the <code>picture</code> element
              and then <a href=
              "http://www.w3.org/TR/html51/webappapis.html#fire-a-simple-event">
              fire a simple event</a> named <code title=
              "event-loadend">loadend</code> at the <code>picture</code>
              element.
            </p>
          </li>
        </ol>
        <p>
          While a user agent is running the above algorithm for an element
          <var>x</var>, there must be a strong reference from the element’s
          <code>Document</code> to the element <var>x</var>, even if that
          element is not <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#in-a-document">in</a>
          its <code>Document</code>.
        </p>
        <p>
          When a <code>picture</code> element is in the <span title=
          "picture-all">completely available</span> state <em>and</em> the user
          agent can decode the media data without errors, then the
          <code>picture</code> element is said to be <dfn>fully
          decodable</dfn>.
        </p>
        <p>
          Whether the image is fetched successfully or not (e.g. whether the
          response code was a 2xx code <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#concept-http-equivalent-codes">
          or equivalent</a>) must be ignored when determining the image’s type
          and whether it is a valid image.
        </p>
        <p class="note">
          This allows servers to return images with error responses, and have
          them displayed.
        </p>
        <p>
          The user agent should apply the <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#content-type-sniffing:-image">
          image sniffing rules</a> to determine the type of the image, with the
          image’s <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#content-type">associated
          Content-Type headers</a> giving the <var>official type</var>. If
          these rules are not applied, then the type of the image must be the
          type given by the image’s <a href=
          "http://www.w3.org/TR/html51/infrastructure.html#content-type">associated
          Content-Type headers</a>.
        </p>
        <p>
          User agents must not support non-image resources with the
          <code>picture</code> element (e.g. XML files whose root element is an
          HTML element). User agents must not run executable code (e.g.
          scripts) embedded in the image resource. User agents must only
          display the first page of a multipage resource (e.g. a PDF file).
          User agents must not allow the resource to act in an interactive
          fashion, but should honor any animation in the resource.
        </p>
        <p>
          This specification does not specify which image types are to be
          supported.
        </p>
      </div>
      <hr>
      <h3>
        Representation
      </h3>
      <div>
        <p>
          What a <code>picture</code> element represents depends on the
          <code title="attr-picture-src">src</code> attribute, the <code title=
          "attr-picture-srcset">srcset</code> attribute, the <code title=
          "attr-picture-alt">alt</code> attribute, and any child elements.
        </p>
        <p class="note">
          This needs to be updated with cases for <code title=
          "attr-picture-srcset">srcset</code> and child elements.
        </p>
        <dl class="switch">
          <dt>
            If the <code title="attr-picture-src">src</code> attribute is set
            and the <code>alt</code> attribute is set to the empty string
          </dt>
          <dd>
            <p>
              The image is either decorative or supplemental to the rest of the
              content, redundant with some other information in the document.
            </p>
            <p>
              If the image is <span title="picture-available">available</span>
              and the user agent is configured to display that image, then the
              element <a href=
              "http://www.w3.org/TR/html51/dom.html#represents">represents</a>
              the element’s image data.
            </p>
            <p>
              Otherwise, the element <a href=
              "http://www.w3.org/TR/html51/dom.html#represents">represents</a>
              nothing, and may be omitted completely from the rendering. User
              agents may provide the user with a notification that an image is
              present but has been omitted from the rendering.
            </p>
          </dd>
          <dt>
            If the <code title="attr-picture-src">src</code> attribute is set
            and the <code title="attr-picture-alt">alt</code> attribute is set
            to a value that isn’t empty
          </dt>
          <dd>
            <p>
              The image is a key part of the content; the <code title=
              "attr-picture-alt">alt</code> attribute gives a textual
              equivalent or replacement for the image.
            </p>
            <p>
              If the image is <span title="picture-available">available</span>
              and the user agent is configured to display that image, then the
              element <a href=
              "http://www.w3.org/TR/html51/dom.html#represents">represents</a>
              the element’s image data.
            </p>
            <p>
              Otherwise, the element <a href=
              "http://www.w3.org/TR/html51/dom.html#represents">represents</a>
              the text given by the <code>alt</code> attribute. User agents may
              provide the user with a notification that an image is present but
              has been omitted from the rendering.
            </p>
          </dd>
          <dt>
            If the <code title="attr-picture-src">src</code> attribute is set
            and the <code title="attr-picture-alt">alt</code> attribute is not
          </dt>
          <dd>
            <p>
              There is no textual equivalent of the image available.
            </p>
            <p>
              If the image is <span title="picture-available">available</span>
              and the user agent is configured to display that image, then the
              element <a href="represents">represents</a> the element’s image
              data.
            </p>
            <p>
              Otherwise, the user agent should display some sort of indicator
              that there is an image that is not being rendered, and may, if
              requested by the user, or if so configured, or when required to
              provide contextual information in response to navigation, provide
              caption information for the image, derived as follows:
            </p>
            <ol>
              <li>
                <p>
                  If the image is a descendant of a figure element that has a
                  child <code>figcaption</code> element, and, ignoring the
                  <code>figcaption</code> element and its descendants, the
                  figure element has no <code>Text</code> node descendants
                  other than <a href=
                  "http://www.w3.org/TR/html51/dom.html#inter-element-whitespace">
                  inter-element whitespace</a>, and no <a href=
                  "http://www.w3.org/TR/html51/dom.html#embedded-content-2">embedded
                  content</a> descendant other than the <code>picture</code>
                  element, then the contents of the first such
                  <code>figcaption</code> element are the caption information;
                  abort these steps.
                </p>
              </li>
              <li>
                <p>
                  There is no caption information.
                </p>
              </li>
            </ol>
          </dd>
          <dt>
            If the <code title="attr-picture-src">src</code> attribute is not
            set and either the <code title="attr-picture-alt">alt</code>
            attribute is set to the empty string or the <code title=
            "attr-picture-alt">alt</code> attribute is not set at all
          </dt>
          <dd>
            <p>
              The element <a href=
              "http://www.w3.org/TR/html51/dom.html#represents">represents</a>
              nothing.
            </p>
          </dd>
          <dt>
            Otherwise
          </dt>
          <dd>
            <p>
              The element <a href=
              "http://www.w3.org/TR/html51/dom.html#represents">represents</a>
              the text given by the <code title="attr-picture-alt">alt</code>
              attribute.
            </p>
          </dd>
        </dl>
        <p>
          The <code title="attr-picture-alt">alt</code> attribute does not
          represent advisory information. User agents must not present the
          contents of the <code title="attr-picture-alt">alt</code> attribute
          in the same way as content of the <code title=
          "attr-picture-title">title</code> attribute.
        </p>
        <p class="warning auth">
          While user agents are encouraged to repair cases of missing
          <code title="attr-picture-alt">alt</code> attributes, authors must
          not rely on such behavior. <a href=
          "http://www.w3.org/TR/html51/embedded-content-0.html#alt">Requirements
          for providing text to act as an alternative for images are described
          in the Embedded Content section</a>.
        </p>
        <p>
          The <em>contents</em> of <code>picture</code> elements, if any, are
          ignored for the purposes of rendering.
        </p>
      </div>
    </div>
    <hr>
    <h2 class="no-num">
      Open Issues
    </h2>
    <p>
      We are tracking <dfn id="dfn-open-issues">open issues</dfn> on Github.
      <a href=
      "https://github.com/ResponsiveImagesCG/picture-element/issues">Please
      help close them</a>!
    </p>
    <div id="open-issues-xhr"></div>
    <h2 class="no-toc no-num">
      Reference implementations
    </h2>
    <p>
      We have a list of <a href=
      "https://github.com/Wilto/draft-prop/wiki/Current-users,-polyfills,-prototypes,-and-implementations">
      current users, polyfills, prototypes, and implementations</a> on Github.
    </p>
    <h2 class="no-num">
      Acknowledgements
    </h2>
    <p id="participants">
      A <a href="http://www.w3.org/community/respimg/participants">complete
      list of participants</a> of the Responsive Images Community Group is
      available at the W3C Community Group Website.
    </p>
    <p class="w3c">
      <dfn>Participants</dfn> of the <a href=
      "http://w3c.responsiveimages.org">Responsive Images Community Group</a>
      at the time of publication were: George Adamson, Marie Alhomme, John
      Allan, Joshua Allen, Angely Alvarez, Aaryn Anderson, Philip Andrews, Phil
      Archer, Justin Avery, Michael Balensiefer, Toni Barrett, Bruno Barros,
      Paul Barton, Adrian Bateman, Jesse Renée Beach, Robin Berjon, Seth
      Bertalotto, Nicolaas Bijvoet, Andreas Bovens, J. Albert Bowden, Adam
      Bradley, Rodrigo Brancher, Gordon Brander, Paul Bridgestock, Aaron
      Brosey, Cory Brown, mairead buchan, Kris Bulman, Ariel Burone, Mathias
      Bynens, Marcos Caceres, Rusty Calder, Ben Callahan, Loïc Calvy, Chuck
      Carpenter, Brandon Carroll, Frederico Cerdeira, David Clements, Geri
      Coady, Anne-Gaelle Colom, Cyril Concolato, Pete Correia, Andy Crum, Jason
      Daihl, Francois Daoust, Kevin Davies, Robert Dawson, Ryan DeBeasi, Anna
      Debenham, Darryl deHaan, David Demaree, George DeMet, Ian Devlin, peter
      droogmans, Marlene Frykman, Dennis Gaebel, Nicolas Gallagher, Miguel
      Garcia, Rafael Garcia Lepper, Larry Garfield, Peter Gasston, David Goss,
      Chris Grant, Petra Gregorova, Jason Grigsby, Antoine Guergnon, Jeff
      Guntle, Aaron Gustafson, Jason Haag, Patrick Haney, Anselm Hannemann,
      chris hardy, Vincent Hardy, Dominique Hazaël-Massieux, Chris Hilditch,
      Nathan Hinshaw, Sean Hintz, John Holt Ripley, Shane Hudson, Tomomi Imura,
      Philip Ingrey, Brett Jankord, Scott Jehl, Dave Johnson, Nathanael Jones,
      Michael Jovel, Chao Ju, Tim Kadlec, Frédéric Kayser, Jin Kim, Andreas
      Klein, Peter Klein, John Kleinschmidt, Daniel Konopacki, Zoran Kurtin,
      Gerardo Lagger, Adam Lake, Chris Lamothe, Tom Lane, Matthieu Larcher,
      Bruce Lawson, Zach Leatherman, Silas Lepcha, Kornel Lesinski, Chris
      Lilley, grappler login, Tania Lopes, André Luís, Jacine Luisi, David
      Maciejewski, Kevin Mack, Ethan Malasky, Josh Marinacci, Eduardo Marques,
      Mathew Marquis, Daniel Martínez, Tom Maslen, Jacob Mather, Chris
      McAndrew, Denys Mishunov, Sabine Moebs, Ian Moffitt, Orestis Molopodis,
      jason morita, David Moulton, Brian Muenzenmeyer, Emi Myoudou, Irakli
      Nadareishvili, Christian Neuberger Jr, David Newton, Todd Nienkerk,
      Kothary Nishant, Ashley Nolan, Kenneth Nordahl, Lewis Nyman, Alejandro
      Oviedo, David Owens, Fernando Pasik, Andrew Pez Pengelly, Hassadee
      Pimsuwan, Manik Rathee, François REMY, Nestor Rojas, Adrian Roselli,
      Chris Ruppel, Oguzcan Sahin, Viljami Salminen, Luca Salvini, Luke Sands,
      aron santa, Jad Sarout, Brandon Satrom, Christoph Saxe, Doug Schepers,
      Jason Schmidt, Christopher Schmitt, Joe Schmitt, Boaz Sender, Tomoyuki
      Shimizu, Ariel Shkedi, Jen Simmons, Katerina Skotalova, Michael[tm]
      Smith, Ignacio Soriano Cano, Aaron Stanush, Jared Stilwell, Matt Stow,
      Kevin Suttle, Satoru Takagi, Philipp Tautz, James Tudsbury, Jacob van
      Zijp, Jitendra Vyas, Yoav Weiss, George White, Matt Wilcox, Richard Wild,
      John Albin Wilkins, Owen Winkler, Jeremy Worboys, Mike Wu, Carlos Zepeda,
      and jintian zheng.
    </p>
    <p class="w3c">
      Contributions also from: Ilya Grigorik and Leon de Rijke.
    </p>
    <h2 class="no-num">
      Normative references
    </h2>
    <dl class="bibliography">
      <dt id="bib-CSS3-MEDIAQUERIES">
        [CSS3-MEDIAQUERIES]
      </dt>
      <dd>
        <a href="http://www.w3.org/TR/css3-mediaqueries/"><cite>Media
        Queries</cite></a>. (<a href=
        "http://www.w3.org/TR/css3-mediaqueries/#status">status</a>).
      </dd>
      <dt id="bib-HTML5">
        [HTML]
      </dt>
      <dd>
        <a href="http://dev.w3.org/html5/spec"><cite>HTML5.</cite></a>
        (<a href="http://dev.w3.org/html5/spec#status-of-this-document">status</a>).
      </dd>
      <dt id="bib-RFC2119">
        [RFC2119]
      </dt>
      <dd>
        <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use
        in RFCs to Indicate Requirement Levels.</cite></a>
      </dd>
      <dt id="bib-WEBIDL">
        [WEBIDL]
      </dt>
      <dd>
        <a href="http://www.w3.org/TR/WebIDL/"><cite>Web IDL.</cite></a>
        (<a href="http://www.w3.org/TR/WebIDL/#sotd">status</a>).
      </dd>
    </dl><script class="ricg" src=
    "https://raw.github.com/ResponsiveImagesCG/meta/master/scripts/show_issues.js">
</script> <script class="ricg" src=
"https://api.github.com/repos/ResponsiveImagesCG/picture-element/issues?state=open&amp;callback=processResponse">
</script> <script class="ricg" src=
"https://raw.github.com/ResponsiveImagesCG/meta/master/scripts/ga.js">
</script>
  </body>
</html>
